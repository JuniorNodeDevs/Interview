#!/usr/bin/node --harmony

'use strict';

var program = require('commander')
  , semver = require('semver')
  , version = require('../package.json').version;

program
  .version(version)
  .option('-s, --start <number>', 'Number to start with, defaults to 1', Number)
  .option('-e, --end <number>', 'Number to count to, defaults to 100', Number)
  .parse(process.argv);

var buzzToFizz = 100
  , s = program.start || 1
  , e = program.end || 100;

if(isNaN(s) || isNaN(e)) {
  console.error('Invalid arguments, expected number');
  process.exit(1);
}

if (e <= s) { 
  console.error('Invalid arguments, expected start number greater than end');
  console.error('start: ' + s);
  console.error('end: ' + e);
  process.exit(1);
}

var fizzbuzz;

if (semver.gt(process.version.replace('v', ''), '0.11.0')) {
  fizzbuzz = require('../lib/yield');
} else {
  fizzbuzz = require('../lib/standard');
}

fizzbuzz(s, e);